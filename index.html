.btn-admin {
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
            color: white;
        }

        .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(156, 39, 176, 0.3);
        }<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë…ì„œì‹¤ í™”ì¥ì‹¤ ì™¸ì¶œ ê´€ë¦¬</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸš»</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 16px;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .input-section {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e1e8ff;
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-field {
            flex: 1;
            min-width: 150px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #dde4ff;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        input[readonly] {
            background: #f0f0f0 !important;
            color: #666 !important;
            cursor: not-allowed;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3);
        }

        .btn-demo {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
        }

        .btn-demo:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(23, 162, 184, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .active-list {
            background: white;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #e1e8ff;
            overflow: hidden;
        }

        .list-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            font-weight: 600;
            font-size: 18px;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.3s ease;
        }

        .list-item:hover {
            background: #f8f9ff;
        }

        .list-item:last-child {
            border-bottom: none;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .user-name {
            font-weight: 600;
            font-size: 16px;
            color: #333;
        }

        .user-number {
            color: #666;
            font-size: 14px;
        }

        .timer-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .timer {
            font-weight: 700;
            font-size: 20px;
            color: #4facfe;
        }

        .timer.warning {
            color: #ff6b00;
        }

        .timer.danger {
            color: #f44336;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status.normal {
            background: #e8f5e8;
            color: #4caf50;
        }

        .status.warning {
            background: #fff3cd;
            color: #ff6b00;
        }

        .status.danger {
            background: #ffeaea;
            color: #f44336;
        }

        .return-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .return-btn:hover {
            background: #45a049;
            transform: translateY(-1px);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #e1e8ff;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #4facfe;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            animation: slideIn 0.3s ease;
            max-width: 350px;
        }

        .notification.warning {
            background: #ff6b6b;
        }

        .notification.info {
            background: #17a2b8;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9ff;
            color: #666;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }

            .button-group {
                flex-direction: column;
            }

            .list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .timer-info {
                align-items: flex-start;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                width: 95%;
                margin: 10px;
            }
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 20px;
        }

        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-body {
            padding: 20px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .records-summary {
            background: #f8f9ff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }

        .summary-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .summary-label {
            font-size: 14px;
            color: #666;
        }

        .summary-value {
            font-size: 18px;
            font-weight: 700;
            color: #4facfe;
        }

        .records-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .record-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 8px;
            background: white;
            transition: all 0.3s ease;
        }

        .record-item:hover {
            background: #f8f9ff;
            border-color: #4facfe;
        }

        .record-info {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .record-name {
            font-weight: 600;
            color: #333;
        }

        .record-number {
            font-size: 12px;
            color: #666;
        }

        .record-times {
            display: flex;
            flex-direction: column;
            gap: 3px;
            text-align: right;
        }

        .record-duration {
            font-size: 12px;
            color: #666;
        }

        .record-time {
            font-size: 12px;
            color: #888;
        }

        .duration-normal {
            color: #4caf50;
        }

        .duration-warning {
            color: #ff6b00;
        }

        .duration-danger {
            color: #f44336;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš» ë…ì„œì‹¤ í™”ì¥ì‹¤ ì™¸ì¶œ ê´€ë¦¬</h1>
            <p>íš¨ìœ¨ì ì¸ í™”ì¥ì‹¤ ì´ìš© ì‹œê°„ ê´€ë¦¬ ì‹œìŠ¤í…œ (ì œí•œì‹œê°„: 10ë¶„)</p>
        </div>

        <div class="main-content">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalOut">0</div>
                    <div class="stat-label">í˜„ì¬ ì™¸ì¶œ ì¤‘</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalWarning">0</div>
                    <div class="stat-label">ì‹œê°„ ì´ˆê³¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayTotal">0</div>
                    <div class="stat-label">ì˜¤ëŠ˜ ì´ ì™¸ì¶œ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="dailyRecords">0</div>
                    <div class="stat-label">ì˜¤ëŠ˜ ì¶œì… ê¸°ë¡</div>
                </div>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <div class="input-field">
                        <label for="studentNumber">í•™ìƒ ë²ˆí˜¸</label>
                        <input type="text" id="studentNumber" placeholder="ì¢Œì„ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    </div>
                    <div class="input-field">
                        <label for="studentName">ì´ë¦„</label>
                        <input type="text" id="studentName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    </div>
                    <div class="input-field">
                        <label for="timeLimit">ì œí•œ ì‹œê°„</label>
                        <input type="text" value="10ë¶„ (ê³ ì •)" readonly>
                    </div>
                </div>
                <div class="button-group">
                    <button class="btn btn-primary" onclick="startRestroom()">
                        ğŸš» í™”ì¥ì‹¤ ì™¸ì¶œ
                    </button>
                    <button class="btn btn-demo" onclick="addDemoData()">
                        ğŸ¬ ë°ëª¨ ë³´ê¸°
                    </button>
                    <button class="btn btn-admin" onclick="showDailyRecords()">
                        ğŸ“Š ì¶œì… ê¸°ë¡
                    </button>
                    <button class="btn btn-danger" onclick="clearAll()">
                        ğŸ”„ ì „ì²´ ì´ˆê¸°í™”
                    </button>
                </div>
            </div>

            <div class="active-list">
                <div class="list-header">
                    ğŸ“‹ í˜„ì¬ ì™¸ì¶œ ì¤‘ì¸ í•™ìƒ ëª©ë¡
                </div>
                <div id="activeList">
                    <div class="empty-state">
                        í˜„ì¬ ì™¸ì¶œ ì¤‘ì¸ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.
                    </div>
                </div>
            </div>

            <!-- ì¶œì… ê¸°ë¡ ëª¨ë‹¬ -->
            <div class="modal" id="recordsModal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>ğŸ“Š ì˜¤ëŠ˜ì˜ ì¶œì… ê¸°ë¡</h2>
                        <button class="modal-close" onclick="closeRecordsModal()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="records-summary">
                            <div class="summary-item">
                                <span class="summary-label">ì´ ì¶œì… íšŸìˆ˜:</span>
                                <span class="summary-value" id="totalRecordsCount">0</span>
                            </div>
                            <div class="summary-item">
                                <span class="summary-label">ì˜¤ëŠ˜ ë‚ ì§œ:</span>
                                <span class="summary-value" id="currentDateDisplay"></span>
                            </div>
                        </div>
                        <div class="records-list" id="recordsList">
                            <!-- ê¸°ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-demo" onclick="exportRecords()">ğŸ“¥ ê¸°ë¡ ë‚´ë³´ë‚´ê¸°</button>
                        <button class="btn btn-danger" onclick="clearDailyRecords()">ğŸ—‘ï¸ ê¸°ë¡ ì‚­ì œ</button>
                        <button class="btn btn-primary" onclick="closeRecordsModal()">ë‹«ê¸°</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            Â© 2025 ë…ì„œì‹¤ í™”ì¥ì‹¤ ì™¸ì¶œ ê´€ë¦¬ ì‹œìŠ¤í…œ | 
            GitHub Pagesë¡œ í˜¸ìŠ¤íŒ… | 
            ë¬¸ì˜: ê°œë°œìì—ê²Œ ì—°ë½
        </div>
    </div>

    <script>
        // ë…ì„œì‹¤ ì¢Œì„ ì •ë³´
        const seatData = {
            41: "ì¡°ë¯¼ì§€", 34: "ì •ì˜ˆë¹ˆ", 27: "ê¹€í˜„ë‚˜", 20: "ì´ì„œì—°2", 14: "ê¹€ìœ ì§„2", 8: "ì§„ì„¸í¬", 1: "ì‹ ì§€ìœ¤",
            42: "í•œì˜ˆë¦°", 35: "ê¹€ì•„ë¦„", 28: "ë¬¸ì§€í˜„", 21: "ê¹€ë¯¼ì„±3", 15: "ê¹€ë„ìœ¤2", 9: "ê¹€ì„œì˜", 2: "ê¹€ì¤€ì„±",
            43: "ë°•ì£¼ì—°", 36: "ì´ì¬ì›", 29: "í•œì¬ì›", 22: "ê¹€ì„œìœ¤3", 16: "êµ¬ì›ëª¨", 10: "íŒ€ëª…ì„œ2", 3: "ì´ìœ ì§„2",
            44: "ë°°ì¤€í˜¸", 37: "ì„±ì—°ì£¼", 30: "ì •ì‹œí˜„", 23: "ì´ìƒí˜„2", 17: "ê¹€íƒœì„ ", 11: "ì¥ìœ ì§„2", 4: "í™©ìŠ¹í•˜",
            45: "ì •ì€ìœ ", 38: "ì˜¤ì‹œí˜„", 31: "ì´ì˜ˆì›", 24: "ì •ë¯¼ì„±", 18: "ì„ì˜ˆì¤€2", 12: "ì´ì„œì€3", 5: "ê¹€ë‹¤ì •",
            46: "ìµœë™ë¹ˆ2", 39: "ë°•ì„œì˜", 32: "ë°•ìŠ¹ì±„", 25: "ì „ì¤€í˜", 19: "ì •ë¯¼ì¤€", 13: "ë°±ì§€ìœ¤", 6: "ê¹€ë‚˜ê²½",
            47: "", 40: "ê¹€ìˆ˜ë¯¼3", 33: "ë°•ì‹œí˜„2", 26: "ê¹€ê±´ìš°", 7: "ìµœë¯¼ì„œ"
        };

        let activeUsers = [];
        let timers = {};
        let todayCount = 0;
        let dailyRecords = []; // í•˜ë£¨ ì¶œì… ê¸°ë¡
        let currentDate = new Date().toDateString();

        function updateStats() {
            document.getElementById('totalOut').textContent = activeUsers.length;
            document.getElementById('totalWarning').textContent = activeUsers.filter(user => user.isOvertime).length;
            document.getElementById('todayTotal').textContent = todayCount;
            document.getElementById('dailyRecords').textContent = dailyRecords.length;
        }

        function showNotification(message, type = 'success') {
            // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(n => n.remove());

            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function getTimerStatus(remainingTime) {
            if (remainingTime > 300) return 'normal'; // 5ë¶„ ì´ìƒ
            if (remainingTime > 0) return 'warning'; // 5ë¶„ ì´í•˜
            return 'danger'; // ì‹œê°„ ì´ˆê³¼
        }

        function startRestroom() {
            const number = document.getElementById('studentNumber').value.trim();
            const name = document.getElementById('studentName').value.trim();
            const timeLimit = 10; // 10ë¶„ ê³ ì •

            if (!number) {
                showNotification('í•™ìƒ ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
                document.getElementById('studentNumber').focus();
                return;
            }

            // ì¢Œì„í‘œì—ì„œ ì´ë¦„ ìë™ ì™„ì„±
            let finalName = name;
            if (seatData[number] && seatData[number] !== "") {
                finalName = seatData[number];
            } else if (!name) {
                showNotification('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'warning');
                document.getElementById('studentName').focus();
                return;
            }

            // ì´ë¯¸ ì™¸ì¶œ ì¤‘ì¸ì§€ í™•ì¸
            if (activeUsers.find(user => user.number === number)) {
                showNotification(`${finalName}ë‹˜ì€ ì´ë¯¸ ì™¸ì¶œ ì¤‘ì…ë‹ˆë‹¤.`, 'warning');
                return;
            }

            const user = {
                number: number,
                name: finalName,
                startTime: Date.now(),
                timeLimit: timeLimit * 60, // ì´ˆ ë‹¨ìœ„ë¡œ ë³€í™˜ (10ë¶„ = 600ì´ˆ)
                isOvertime: false
            };

            activeUsers.push(user);
            todayCount++;
            
            startTimer(user);
            updateActiveList();
            updateStats();
            
            showNotification(`${finalName}ë‹˜ì´ í™”ì¥ì‹¤ë¡œ ì™¸ì¶œí–ˆìŠµë‹ˆë‹¤. (ì œí•œì‹œê°„: 10ë¶„)`, 'info');
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('studentNumber').value = '';
            document.getElementById('studentName').value = '';
            document.getElementById('studentNumber').focus();
        }

        function startTimer(user) {
            const timerId = setInterval(() => {
                const elapsed = Math.floor((Date.now() - user.startTime) / 1000);
                const remaining = user.timeLimit - elapsed;
                
                if (remaining <= 0 && !user.isOvertime) {
                    user.isOvertime = true;
                    showNotification(`âš ï¸ ${user.name}ë‹˜ì˜ ì™¸ì¶œ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'warning');
                    
                    // ì†Œë¦¬ ì•Œë¦¼ (ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›í•˜ëŠ” ê²½ìš°)
                    try {
                        if ('speechSynthesis' in window) {
                            const utterance = new SpeechSynthesisUtterance(`${user.name}ë‹˜ì˜ ì™¸ì¶œ ì‹œê°„ì´ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤`);
                            utterance.lang = 'ko-KR';
                            utterance.rate = 0.8;
                            speechSynthesis.speak(utterance);
                        }
                    } catch (e) {
                        console.log('ìŒì„± ì•Œë¦¼ ì§€ì›ë˜ì§€ ì•ŠìŒ');
                    }
                }
                
                updateActiveList();
                updateStats();
            }, 1000);
            
            timers[user.number] = timerId;
        }

        function returnUser(number) {
            const userIndex = activeUsers.findIndex(user => user.number === number);
            if (userIndex !== -1) {
                const user = activeUsers[userIndex];
                const endTime = Date.now();
                const duration = Math.floor((endTime - user.startTime) / 1000);
                
                // ì¶œì… ê¸°ë¡ì— ì¶”ê°€
                addToRecords(user, duration, endTime);
                
                clearInterval(timers[number]);
                delete timers[number];
                activeUsers.splice(userIndex, 1);
                
                updateActiveList();
                updateStats();
                showNotification(`${user.name}ë‹˜ì´ ë³µê·€í–ˆìŠµë‹ˆë‹¤.`);
            }
        }

        function updateActiveList() {
            const listContainer = document.getElementById('activeList');
            
            if (activeUsers.length === 0) {
                listContainer.innerHTML = '<div class="empty-state">í˜„ì¬ ì™¸ì¶œ ì¤‘ì¸ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            listContainer.innerHTML = activeUsers.map(user => {
                const elapsed = Math.floor((Date.now() - user.startTime) / 1000);
                const remaining = user.timeLimit - elapsed;
                const status = getTimerStatus(remaining);
                const timeDisplay = remaining > 0 ? formatTime(remaining) : formatTime(Math.abs(remaining));
                const statusText = remaining > 0 ? 'ë‚¨ì€ ì‹œê°„' : 'ì´ˆê³¼ ì‹œê°„';
                
                return `
                    <div class="list-item">
                        <div class="user-info">
                            <div class="user-name">${user.name}</div>
                            <div class="user-number">ì¢Œì„ ë²ˆí˜¸: ${user.number}</div>
                        </div>
                        <div class="timer-info">
                            <div class="timer ${status}">${timeDisplay}</div>
                            <div class="status ${status}">${statusText}</div>
                        </div>
                        <button class="return-btn" onclick="returnUser('${user.number}')">
                            ë³µê·€ ì™„ë£Œ
                        </button>
                    </div>
                `;
            }).join('');
        }

        function clearAll() {
            if (activeUsers.length === 0) {
                showNotification('ì´ˆê¸°í™”í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                return;
            }
            
            if (confirm('ëª¨ë“  ì™¸ì¶œ ê¸°ë¡ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                Object.values(timers).forEach(timer => clearInterval(timer));
                timers = {};
                activeUsers = [];
                todayCount = 0;
                updateActiveList();
                updateStats();
                showNotification('ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ë°ëª¨ ë°ì´í„° ì¶”ê°€ í•¨ìˆ˜
        function addDemoData() {
            if (activeUsers.length > 0) {
                if (!confirm('í˜„ì¬ ë°ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤. ë°ëª¨ë¥¼ ì¶”ê°€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
            }

            // ë°ëª¨ìš© ì‚¬ìš©ìë“¤ ì¶”ê°€ (ëª¨ë‘ 10ë¶„ ì œí•œ)
            const demoUsers = [
                { number: "27", name: "ê¹€í˜„ë‚˜", timeLimit: 10 * 60, elapsed: 6 * 60 }, // 6ë¶„ ê²½ê³¼
                { number: "42", name: "í•œì˜ˆë¦°", timeLimit: 10 * 60, elapsed: 12 * 60 }, // 2ë¶„ ì´ˆê³¼
                { number: "15", name: "ê¹€ë„ìœ¤2", timeLimit: 10 * 60, elapsed: 3 * 60 }, // 3ë¶„ ê²½ê³¼
            ];

            demoUsers.forEach(demo => {
                // ì¤‘ë³µ ì²´í¬
                if (!activeUsers.find(user => user.number === demo.number)) {
                    const user = {
                        number: demo.number,
                        name: demo.name,
                        startTime: Date.now() - (demo.elapsed * 1000),
                        timeLimit: demo.timeLimit,
                        isOvertime: demo.elapsed > demo.timeLimit
                    };
                    
                    activeUsers.push(user);
                    startTimer(user);
                }
            });

            if (todayCount < 10) {
                todayCount = 12; // ì˜¤ëŠ˜ ì´ ì™¸ì¶œ íšŸìˆ˜
            }
            
            updateActiveList();
            updateStats();
            
            showNotification('ë°ëª¨ ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤! ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•´ë³´ì„¸ìš”.', 'info');
        }

        // ì¢Œì„ ë²ˆí˜¸ ì…ë ¥ ì‹œ ìë™ ì´ë¦„ ì™„ì„±
        document.getElementById('studentNumber').addEventListener('input', function(e) {
            const number = e.target.value.trim();
            const nameField = document.getElementById('studentName');
            
            if (seatData[number] && seatData[number] !== "") {
                nameField.value = seatData[number];
                nameField.style.backgroundColor = '#e8f5e8';
                nameField.style.borderColor = '#4caf50';
            } else {
                if (nameField.value === seatData[e.target.dataset.lastNumber]) {
                    nameField.value = '';
                }
                nameField.style.backgroundColor = '';
                nameField.style.borderColor = '#dde4ff';
            }
            
            e.target.dataset.lastNumber = number;
        });

        // ì—”í„°í‚¤ë¡œ ì™¸ì¶œ ì‹œì‘
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startRestroom();
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadDailyRecords(); // ì˜¤ëŠ˜ì˜ ì¶œì… ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
            checkDayReset(); // ë‚ ì§œ ë³€ê²½ ì²´í¬
            updateStats();
            updateActiveList();
            document.getElementById('studentNumber').focus();
            
            // ì›¹í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì•Œë¦¼
            setTimeout(() => {
                showNotification('ë…ì„œì‹¤ í™”ì¥ì‹¤ ì™¸ì¶œ ê´€ë¦¬ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!', 'info');
            }, 1000);
            
            // 3ì´ˆ í›„ ë°ëª¨ ë°ì´í„° ìë™ ì¶”ê°€ (ê°œë°œìš©)
            setTimeout(() => {
                if (confirm('ë°ëª¨ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    addDemoData();
                }
            }, 3000);
        });

        // ì¶œì… ê¸°ë¡ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function addToRecords(user, duration, endTime) {
            checkDayReset(); // ë‚ ì§œ ë³€ê²½ ì²´í¬
            
            const record = {
                number: user.number,
                name: user.name,
                startTime: user.startTime,
                endTime: endTime,
                duration: duration,
                isOvertime: duration > 600, // 10ë¶„ ì´ˆê³¼ ì—¬ë¶€
                date: new Date().toDateString()
            };
            
            dailyRecords.push(record);
            saveDailyRecords();
        }

        function loadDailyRecords() {
            const today = new Date().toDateString();
            const stored = localStorage.getItem(`dailyRecords_${today}`);
            
            if (stored) {
                try {
                    const data = JSON.parse(stored);
                    // ì˜¤ì „ 8ì‹œ ì´í›„ ê¸°ë¡ë§Œ ë¡œë“œ
                    const now = new Date();
                    const startTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 8, 0, 0);
                    
                    dailyRecords = data.filter(record => new Date(record.endTime) >= startTime);
                    todayCount = dailyRecords.length;
                } catch (e) {
                    console.log('ì¶œì… ê¸°ë¡ ë¡œë“œ ì‹¤íŒ¨');
                    dailyRecords = [];
                }
            }
        }

        function saveDailyRecords() {
            const today = new Date().toDateString();
            localStorage.setItem(`dailyRecords_${today}`, JSON.stringify(dailyRecords));
        }

        function checkDayReset() {
            const today = new Date().toDateString();
            const now = new Date();
            
            // ìì •ì´ ì§€ë‚¬ê±°ë‚˜ ë‚ ì§œê°€ ë°”ë€Œì—ˆì„ ë•Œ
            if (currentDate !== today) {
                // ìì •(00:00)ì— ì „ë‚  ê¸°ë¡ ì •ë¦¬
                if (now.getHours() === 0 && now.getMinutes() < 5) {
                    clearOldRecords();
                }
                
                currentDate = today;
                dailyRecords = [];
                todayCount = 0;
                
                // ì˜¤ì „ 8ì‹œ ì´í›„ë¼ë©´ ì˜¤ëŠ˜ ê¸°ë¡ ë¡œë“œ
                if (now.getHours() >= 8) {
                    loadDailyRecords();
                }
                
                updateStats();
            }
        }

        function clearOldRecords() {
            // 3ì¼ ì´ì „ ê¸°ë¡ ì‚­ì œ
            const threeDaysAgo = new Date();
            threeDaysAgo.setDate(threeDaysAgo.getDate() - 3);
            
            const keys = Object.keys(localStorage);
            keys.forEach(key => {
                if (key.startsWith('dailyRecords_')) {
                    const dateStr = key.replace('dailyRecords_', '');
                    const recordDate = new Date(dateStr);
                    
                    if (recordDate < threeDaysAgo) {
                        localStorage.removeItem(key);
                    }
                }
            });
        }

        function showDailyRecords() {
            const modal = document.getElementById('recordsModal');
            const recordsList = document.getElementById('recordsList');
            const totalCount = document.getElementById('totalRecordsCount');
            const dateDisplay = document.getElementById('currentDateDisplay');
            
            modal.style.display = 'flex';
            totalCount.textContent = dailyRecords.length;
            dateDisplay.textContent = new Date().toLocaleDateString('ko-KR');
            
            if (dailyRecords.length === 0) {
                recordsList.innerHTML = '<div class="empty-state">ì˜¤ëŠ˜ ì¶œì… ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            // ìµœì‹  ê¸°ë¡ë¶€í„° í‘œì‹œ
            const sortedRecords = [...dailyRecords].sort((a, b) => b.endTime - a.endTime);
            
            recordsList.innerHTML = sortedRecords.map(record => {
                const durationClass = record.duration > 600 ? 'duration-danger' : 
                                    record.duration > 300 ? 'duration-warning' : 'duration-normal';
                
                const startTimeStr = new Date(record.startTime).toLocaleTimeString('ko-KR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const endTimeStr = new Date(record.endTime).toLocaleTimeString('ko-KR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const durationMin = Math.floor(record.duration / 60);
                const durationSec = record.duration % 60;
                const durationStr = `${durationMin}ë¶„ ${durationSec}ì´ˆ`;
                
                return `
                    <div class="record-item">
                        <div class="record-info">
                            <div class="record-name">${record.name}</div>
                            <div class="record-number">ì¢Œì„: ${record.number}ë²ˆ</div>
                        </div>
                        <div class="record-times">
                            <div class="record-duration ${durationClass}">${durationStr}</div>
                            <div class="record-time">${startTimeStr} â†’ ${endTimeStr}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function closeRecordsModal() {
            document.getElementById('recordsModal').style.display = 'none';
        }

        function exportRecords() {
            if (dailyRecords.length === 0) {
                showNotification('ë‚´ë³´ë‚¼ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.', 'warning');
                return;
            }
            
            const today = new Date().toLocaleDateString('ko-KR');
            let csvContent = `ë…ì„œì‹¤ í™”ì¥ì‹¤ ì¶œì… ê¸°ë¡ - ${today}\n\n`;
            csvContent += 'ì´ë¦„,ì¢Œì„ë²ˆí˜¸,ì™¸ì¶œì‹œê°„,ë³µê·€ì‹œê°„,ì´ìš©ì‹œê°„,ì´ˆê³¼ì—¬ë¶€\n';
            
            dailyRecords.forEach(record => {
                const startTime = new Date(record.startTime).toLocaleTimeString('ko-KR');
                const endTime = new Date(record.endTime).toLocaleTimeString('ko-KR');
                const duration = `${Math.floor(record.duration / 60)}ë¶„ ${record.duration % 60}ì´ˆ`;
                const overtime = record.isOvertime ? 'ì´ˆê³¼' : 'ì •ìƒ';
                
                csvContent += `${record.name},${record.number},${startTime},${endTime},${duration},${overtime}\n`;
            });
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `í™”ì¥ì‹¤_ì¶œì…ê¸°ë¡_${today.replace(/\./g, '')}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('ì¶œì… ê¸°ë¡ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function clearDailyRecords() {
            if (confirm('ì˜¤ëŠ˜ì˜ ëª¨ë“  ì¶œì… ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                dailyRecords = [];
                todayCount = 0;
                saveDailyRecords();
                updateStats();
                closeRecordsModal();
                showNotification('ì¶œì… ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // 1ë¶„ë§ˆë‹¤ ë‚ ì§œ ë³€ê²½ ì²´í¬ ë° ìƒíƒœ ì ê²€
        setInterval(() => {
            checkDayReset();
            
            const overtimeUsers = activeUsers.filter(user => user.isOvertime);
            if (overtimeUsers.length > 0) {
                console.log(`í˜„ì¬ ${overtimeUsers.length}ëª…ì´ ì‹œê°„ ì´ˆê³¼ ìƒíƒœì…ë‹ˆë‹¤.`);
            }
        }, 60000); // 1ë¶„ë§ˆë‹¤

        // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ í™•ì¸
        window.addEventListener('beforeunload', function(e) {
            if (activeUsers.length > 0) {
                e.returnValue = 'í˜„ì¬ ì™¸ì¶œ ì¤‘ì¸ í•™ìƒì´ ìˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
            }
        });
    </script>
</body>
</html>
